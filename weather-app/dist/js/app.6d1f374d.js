(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},r={app:0},a=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0866":function(t,e,s){t.exports=s.p+"img/sunrise-icon.74cf5f47.svg"},"147c":function(t,e,s){"use strict";s("6c5b")},"3d44":function(t,e,s){t.exports=s.p+"img/sunset-icon.4e209790.svg"},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("mainComponent")],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper",class:t.weatherClass},[n("transition",{attrs:{name:"scale",appear:""}},[n("div",{staticClass:"container"},[n("header",{staticClass:"header"},[!0===t.notFound?n("span",{staticClass:"notFound"},[t._v("Такой город не найден")]):t._e(),n("div",{staticClass:"search__wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"search-input",attrs:{type:"text",placeholder:"Введите город"},domProps:{value:t.query},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchWeather(t.query)},input:function(e){e.target.composing||(t.query=e.target.value)}}}),n("button",{staticClass:"search-button",on:{click:function(e){return t.fetchWeather(t.query)}}},[n("img",{attrs:{src:s("89b8"),width:"16",height:"16",alt:""}})])]),n("div",{staticClass:"search__presets"})]),1==t.isFetched?n("main",{key:"1",staticClass:"main"},[n("section",{staticClass:"result__main"},[n("span",{staticClass:"city"},[t._v(t._s(t.results.city)+" "),n("small",{staticClass:"fz-sm"},[t._v("("+t._s(t.results.population)+" чел.)")])]),n("div",{staticClass:"content__wrapper"},[n("div",{staticClass:"temp__wrapper"},[n("transition",{attrs:{name:"fade"}},[n("span",{staticClass:"temp"},[t._v(t._s(t.results.temp)+"°")])]),n("span",{staticClass:"temp-feels fz-sm"},[t._v("Ощущается как "),n("strong",[t._v(t._s(t.results.feels_like)+"°")])])],1),n("div",{staticClass:"temp__wrapper"},[n("img",{staticClass:"temp-icon",attrs:{src:"https://openweathermap.org/img/wn/"+t.results.iconNow+"@2x.png",width:"100",alt:t.results.desc}}),n("div",{staticClass:"temp-desc fz-sm"},[t._v(" "+t._s(t.results.desc)+" ")])])])]),n("section",{staticClass:"result__info"},[n("div",{staticClass:"content__wrapper--grid"},[n("dl",{staticClass:"info__wrapper"},[n("dt",[t._v("Скорость ветра")]),n("dd",{staticClass:"fz-sm"},[t._v(t._s(t.results.wind)+" м/с")])]),n("dl",{staticClass:"info__wrapper"},[n("dt",[t._v("Давление")]),n("dd",{staticClass:"fz-sm"},[t._v(t._s(t.results.pressure)+" мм рт. ст.")])]),n("dl",{staticClass:"info__wrapper"},[n("dt",[t._v("Влажность")]),n("dd",{staticClass:"fz-sm"},[t._v(t._s(t.results.humidity)+"%")])])]),n("div",{staticClass:"content__wrapper"},[n("dl",{staticClass:"time__wrapper"},[n("img",{attrs:{src:s("0866"),width:"35",alt:"Рассвет"}}),n("dt",[t._v("Рассвет")]),n("dd",{staticClass:"fz-sm"},[t._v(" "+t._s(this.results.sunrise)+" ")])]),n("dl",{staticClass:"time__wrapper"},[n("img",{attrs:{src:s("3d44"),width:"35",alt:"Закат"}}),n("dt",[t._v("Закат")]),n("dd",{staticClass:"fz-sm"},[t._v(" "+t._s(this.results.sunset)+" ")])])])]),n("section",t._l(t.fullResults.list,(function(e,s){return n("div",{key:e[s]},[t._v(" "+t._s(t.fullResults.list[s].weather[0].main)+" "+t._s(Math.floor(t.fullResults.list[s].main.temp)+3)+" ")])})),0)]):n("main",{key:"2",staticClass:"main"},[n("section",{staticClass:"placeholder"},[n("div",{staticClass:"logo"},[n("img",{attrs:{src:s("af39"),width:"300",height:"300",alt:""}})])])])])])],1)},o=[],c=(s("a4d3"),s("e01a"),s("99af"),s("b0c0"),s("d3b7"),s("ac1f"),s("25f0"),s("5319"),s("498a"),s("96cf"),s("1da1")),l={name:"mainComponent",data:function(){return{api_key:"278171a7d3d204b5ea4ab96b9d3ceff5",api_base:"https://api.openweathermap.org/data/2.5/forecast",query:"",isFetched:!1,notFound:!1,fullResults:{},results:{city:"",population:"",desc:"",sunrise:"",sunset:"",wind:"",pressure:"",humidity:"",temp:"",feels_like:"",iconNow:""},weatherClass:""}},methods:{fetchWeather:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(""!=e.query.trim()){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,fetch("".concat(e.api_base,"?q=").concat(t,"&units=metric&appid=").concat(e.api_key,"&lang=ru"));case 4:return n=s.sent,s.next=7,n.json();case 7:r=s.sent,"200"===r.cod?(e.fullResults=r,e.results.city=r.city.name,e.results.population=e.populationFilter(r.city.population),e.results.desc=r.list[0].weather[0].description,e.results.wind=r.list[0].wind.speed,e.results.pressure=r.list[0].main.pressure-250,e.results.humidity=r.list[0].main.humidity,e.results.temp=Math.floor(r.list[0].main.temp)+3,e.results.feels_like=Math.floor(r.list[0].main.feels_like)+3,e.results.iconNow=r.list[0].weather[0].icon,e.results.sunrise=e.timeConvert(r.city.sunrise),e.results.sunset=e.timeConvert(r.city.sunset),e.isFetched=!0,e.notFound=!1,e.query="",e.weatherState()):e.notFound=!0;case 9:case"end":return s.stop()}}),s)})))()},weatherState:function(){return this.weatherClass=this.fullResults.list[0].weather[0].main.toLowerCase()},timeConvert:function(t){var e=new Date(1e3*t),s=function(t){return t<10?"0"+t:t};return"".concat(s(e.getUTCHours()),":").concat(s(e.getUTCMinutes()))},populationFilter:function(t){if("1000000"==t)return"> 1 млн.";var e=function(t){var e=t.toString();return e.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1 ")};return e(t)}}},u=l,p=(s("147c"),s("2877")),d=Object(p["a"])(u,i,o,!1,null,"0ab78bfc",null),f=d.exports,m={name:"App",components:{mainComponent:f}},h=m,_=(s("5c0b"),Object(p["a"])(h,r,a,!1,null,null,null)),v=_.exports,w=s("9483");Object(w["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),new n["a"]({render:function(t){return t(v)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";s("9c0c")},"6c5b":function(t,e,s){},"89b8":function(t,e,s){t.exports=s.p+"img/search-icon.083902c7.svg"},"9c0c":function(t,e,s){},af39:function(t,e,s){t.exports=s.p+"img/cloud-icon.06de22df.svg"}});
//# sourceMappingURL=app.6d1f374d.js.map